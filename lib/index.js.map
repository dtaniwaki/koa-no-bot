{"version":3,"sources":["index.coffee"],"names":[],"mappings":"AAAA,IAAA;;AAAA,UAAA,GAAa,SAAC,OAAD;AACX,MAAA;EAAA,MAAqB,OAAA,IAAW,EAAhC,EAAE,WAAA,IAAF,EAAQ,eAAA;EACR,SAAA,OAAS,UAAU,CAAC;EACpB,aAAA,WAAa,SAAC,GAAD,EAAM,EAAN;WACX,IAAC,CAAA,OAAA,CAAD,CAAO,GAAP;EADW;SAGb,UAAC,IAAD;AACE,QAAA;IAAA,EAAA,GAAK,IAAC,CAAA,GAAD,CAAK,YAAL;AACL,SAAA,sCAAA;;MACE,IAAG,EAAE,CAAC,KAAH,CAAS,GAAG,CAAC,MAAb,CAAH;QACE,OAAO,CAAC,GAAR,CAAY,QAAA,GAAS,GAAG,CAAC,IAAb,GAAkB,IAAlB,GAAsB,GAAG,CAAC,MAA1B,GAAiC,IAA7C,EAAkD,EAAlD;QACA,QAAQ,CAAC,KAAT,CAAe,IAAf,EAAkB,CAAC,GAAD,EAAM,EAAN,CAAlB,EAFF;;AADF;WAKA,OAAM,IAAN;EAPF;AANW;;AAeb,UAAU,CAAC,YAAX,GAA0B;EAAC;IACzB,IAAA,EAAM,cADmB;IAEzB,MAAA,EAAQ,yEAFiB;GAAD;;;AAK1B,MAAM,CAAC,OAAP,GAAiB","file":"index.js","sourceRoot":"/src","sourcesContent":["middleware = (options) ->\n  { bots, callback } = options || {}\n  bots ||= middleware.default_bots\n  callback ||= (bot, ua) ->\n    @throw 400\n\n  (next) ->\n    ua = @get(\"user-agent\")\n    for bot in bots\n      if ua.match(bot.regexp)\n        console.log \"Found #{bot.name} (#{bot.regexp}):\", ua\n        callback.apply(@, [bot, ua])\n\n    yield next\n\nmiddleware.default_bots = [{\n  name: \"General Bots\"\n  regexp: /(bot\\b|spider\\b|crawler\\b|wget|slurp|Mediapartners-Google|YahooSeeker)/i\n}]\n\nmodule.exports = middleware\n"]}